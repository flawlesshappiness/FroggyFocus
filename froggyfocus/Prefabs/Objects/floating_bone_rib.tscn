[gd_scene load_steps=29 format=3 uid="uid://cvmh0jn7gf0a3"]

[ext_resource type="Script" uid="uid://lxwn2lctyv3r" path="res://Prefabs/Objects/FloatingPlatform.cs" id="1_uywkn"]
[ext_resource type="PackedScene" uid="uid://mhe48b1m8i2x" path="res://Assets/FlawLizArt/Bones/rib.fbx" id="1_xnyg8"]
[ext_resource type="Script" uid="uid://ckv4mr7osps52" path="res://Modules/Animation/AnimationStateMachine.cs" id="3_vpqlu"]
[ext_resource type="AudioStream" uid="uid://cjujq6hhnkdkf" path="res://Sounds/Raw/sfx_step_water_high_001.wav" id="5_udbp0"]
[ext_resource type="AudioStream" uid="uid://bhlhbpuh6jvtl" path="res://Sounds/Raw/sfx_step_water_high_002.wav" id="6_ya55r"]
[ext_resource type="AudioStream" uid="uid://dr6lnaq404371" path="res://Sounds/Raw/sfx_step_water_high_003.wav" id="7_w6erj"]
[ext_resource type="AudioStream" uid="uid://dwtm2b1y7gxh6" path="res://Sounds/Raw/sfx_impact_water_low_001.wav" id="8_dhp7y"]
[ext_resource type="AudioStream" uid="uid://iupdbu38bkq0" path="res://Sounds/Raw/sfx_impact_water_low_002.wav" id="9_kbv3j"]
[ext_resource type="AudioStream" uid="uid://mvr5nhm1lqiv" path="res://Sounds/Raw/sfx_impact_water_low_003.wav" id="10_v0dlm"]
[ext_resource type="AudioStream" uid="uid://bu3w1t785m70f" path="res://Sounds/Raw/sfx_impact_water_low_004.wav" id="11_dhxf5"]

[sub_resource type="CylinderShape3D" id="CylinderShape3D_b0077"]
height = 0.37355
radius = 0.565918

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_fuej2"]
shading_mode = 0
albedo_color = Color(0.3, 0.15, 0, 1)

[sub_resource type="CylinderMesh" id="CylinderMesh_dhp7y"]
material = SubResource("StandardMaterial3D_fuej2")
height = 0.01

[sub_resource type="Animation" id="Animation_b0077"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Offset/Anim:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("PsShakeBubblesUp:emitting")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("PsShakeBubblesWater:emitting")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("SfxWaterShake:playing")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}
tracks/4/type = "value"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("SfxWaterPlop:playing")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}
tracks/5/type = "value"
tracks/5/imported = false
tracks/5/enabled = true
tracks/5/path = NodePath("Offset/Shadow:scale")
tracks/5/interp = 1
tracks/5/loop_wrap = true
tracks/5/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(1, 1, 1)]
}

[sub_resource type="Animation" id="Animation_uywkn"]
resource_name = "hide"
length = 0.25
step = 0.05
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Offset/Anim:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.25),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(0, 0, 0), Vector3(0, -1, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("PsShakeBubblesWater:emitting")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("PsShakeBubblesUp:emitting")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("SfxWaterPlop:playing")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}
tracks/4/type = "value"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("Offset/Shadow:scale")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"times": PackedFloat32Array(0, 0.25),
"transitions": PackedFloat32Array(0.5, 1),
"update": 0,
"values": [Vector3(0.01, 0.01, 0.01), Vector3(1, 1, 1)]
}

[sub_resource type="Animation" id="Animation_xnyg8"]
resource_name = "idle"
loop_mode = 1
step = 0.05
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Offset/Anim:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.5, 1),
"transitions": PackedFloat32Array(2, -2, 1),
"update": 0,
"values": [Vector3(0, 0, 0), Vector3(0, -0.02, 0), Vector3(0, 0, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("PsShakeBubblesUp:emitting")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("PsShakeBubblesWater:emitting")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}

[sub_resource type="Animation" id="Animation_vpqlu"]
resource_name = "shake"
length = 0.5
loop_mode = 1
step = 0.05
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Offset/Anim:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.05, 0.1, 0.15, 0.2, 0.25, 0.3, 0.35, 0.4, 0.45, 0.5),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1),
"update": 0,
"values": [Vector3(-0.02, 0, 0), Vector3(0.02, 0, 0), Vector3(-0.02, 0, 0), Vector3(0.02, 0, 0), Vector3(-0.02, 0, 0), Vector3(0.02, 0, 0), Vector3(-0.02, 0, 0), Vector3(0.02, 0, 0), Vector3(-0.02, 0, 0), Vector3(0.02, 0, 0), Vector3(-0.02, 0, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("PsShakeBubblesUp:emitting")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("PsShakeBubblesWater:emitting")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("SfxWaterShake:playing")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}

[sub_resource type="Animation" id="Animation_iap2c"]
resource_name = "show"
length = 0.5
step = 0.05
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Offset/Anim:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.25, 0.5),
"transitions": PackedFloat32Array(0.5, -2, 1),
"update": 0,
"values": [Vector3(0, -1, 0), Vector3(0, 0.05, 0), Vector3(0, 0, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("PsShakeBubblesUp:emitting")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("PsShakeBubblesWater:emitting")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 0.45),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [true, false]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("SfxWaterPlop:playing")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0.1),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}
tracks/4/type = "value"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("Offset/Shadow:scale")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"times": PackedFloat32Array(0, 0.5),
"transitions": PackedFloat32Array(0.5, 1),
"update": 0,
"values": [Vector3(1, 1, 1), Vector3(0.01, 0.01, 0.01)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_vpqlu"]
_data = {
&"RESET": SubResource("Animation_b0077"),
&"hide": SubResource("Animation_uywkn"),
&"idle": SubResource("Animation_xnyg8"),
&"shake": SubResource("Animation_vpqlu"),
&"show": SubResource("Animation_iap2c")
}

[sub_resource type="Curve" id="Curve_b0077"]
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(0.8, 1), 0.0, 0.0, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 3

[sub_resource type="CurveTexture" id="CurveTexture_vpqlu"]
curve = SubResource("Curve_b0077")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_uywkn"]
emission_shape = 6
emission_ring_axis = Vector3(0, 0, 1)
emission_ring_height = 0.0
emission_ring_radius = 1.0
emission_ring_inner_radius = 0.0
emission_ring_cone_angle = 90.0
direction = Vector3(0, 0, 1)
spread = 5.0
initial_velocity_min = 2.0
initial_velocity_max = 2.0
gravity = Vector3(0, -9, 0)
scale_min = 0.05
scale_max = 0.1
scale_curve = SubResource("CurveTexture_vpqlu")

[sub_resource type="SphereMesh" id="SphereMesh_iap2c"]

[sub_resource type="Curve" id="Curve_uywkn"]
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(0.8, 1), 0.0, 0.0, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 3

[sub_resource type="CurveTexture" id="CurveTexture_iap2c"]
curve = SubResource("Curve_uywkn")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_solmn"]
spread = 180.0
flatness = 1.0
initial_velocity_min = 1.0
initial_velocity_max = 1.0
gravity = Vector3(0, 0, 0)
scale_min = 0.2
scale_max = 0.2
scale_curve = SubResource("CurveTexture_iap2c")

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_fuej2"]
random_pitch = 1.1
streams_count = 3
stream_0/stream = ExtResource("5_udbp0")
stream_1/stream = ExtResource("6_ya55r")
stream_2/stream = ExtResource("7_w6erj")

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_8jtox"]
random_pitch = 1.1
streams_count = 4
stream_0/stream = ExtResource("8_dhp7y")
stream_1/stream = ExtResource("9_kbv3j")
stream_2/stream = ExtResource("10_v0dlm")
stream_3/stream = ExtResource("11_dhxf5")

[node name="FloatingBoneRib" type="Node3D" node_paths=PackedStringArray("Animation")]
script = ExtResource("1_uywkn")
TickUp = 6
TickWarn = 4
TickDown = 6
Animation = NodePath("AnimationStateMachine")

[node name="Offset" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.252907, 0)

[node name="Anim" type="Node3D" parent="Offset"]

[node name="rib" parent="Offset/Anim" instance=ExtResource("1_xnyg8")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.271924, 0)

[node name="StaticBody3D" type="StaticBody3D" parent="Offset/Anim"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.271924, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Offset/Anim/StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.0777969, 0)
shape = SubResource("CylinderShape3D_b0077")

[node name="Shadow" type="Node3D" parent="Offset"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.25, 0)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Offset/Shadow"]
mesh = SubResource("CylinderMesh_dhp7y")

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_vpqlu")
}

[node name="PsShakeBubblesUp" type="GPUParticles3D" parent="."]
transform = Transform3D(1, 0, 0, 0, -5.96046e-08, 1, 0, -1, -5.96046e-08, 0, 0, 0)
emitting = false
amount = 16
lifetime = 0.4
fixed_fps = 60
process_material = SubResource("ParticleProcessMaterial_uywkn")
draw_pass_1 = SubResource("SphereMesh_iap2c")

[node name="PsShakeBubblesWater" type="GPUParticles3D" parent="."]
emitting = false
amount = 16
lifetime = 0.7
process_material = SubResource("ParticleProcessMaterial_solmn")
draw_pass_1 = SubResource("SphereMesh_iap2c")

[node name="AnimationStateMachine" type="Node" parent="." node_paths=PackedStringArray("Animator")]
script = ExtResource("3_vpqlu")
Animator = NodePath("../AnimationPlayer")
metadata/_custom_type_script = "uid://ckv4mr7osps52"

[node name="SfxWaterShake" type="AudioStreamPlayer3D" parent="."]
stream = SubResource("AudioStreamRandomizer_fuej2")
volume_db = -10.0
max_distance = 16.0
max_polyphony = 5
bus = &"SFX"

[node name="SfxWaterPlop" type="AudioStreamPlayer3D" parent="."]
stream = SubResource("AudioStreamRandomizer_8jtox")
volume_db = -10.0
max_distance = 16.0
max_polyphony = 5
bus = &"SFX"
